<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Kindle Book Reader</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="style.css">
    <!-- PageFlip CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/page-flip/dist/css/page-flip.css" />
</head>
<body>
    <!-- Library Screen -->
    <main id="library" class="library">
        <header class="header">
            <h1>üìö Kindle Book Reader</h1>
            <p>Your digital library organized by class</p>
        </header>
        
        <div class="class-grid" id="classGrid">
            <!-- Classes will be populated here -->
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Loading your library...</p>
        </div>
        
        <div class="error" id="error" style="display: none;">
            <p>Failed to load library. Please refresh the page.</p>
        </div>
    </main>

    <!-- Reader Screen -->
    <section id="reader" class="reader" style="display: none;" aria-hidden="true">
        <header class="reader-header">
            <button id="backBtn" class="back-btn" aria-label="Back to library">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                <span>Library</span>
            </button>
            <div class="book-info">
                <h2 id="bookTitle">Book Title</h2>
                <p id="bookAuthor">Author</p>
            </div>
        </header>

        <div class="reader-content">
            <div id="flipbook" class="flipbook"></div>
        </div>

        <!-- Mobile Controls (bottom sticky) -->
        <div class="mobile-controls">
            <div class="page-info">
                <span id="pageCounter">1 / 1</span>
            </div>
            <div class="control-buttons">
                <button id="prevBtn" class="control-btn" aria-label="Previous page">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                </button>
                <button id="ttsBtn" class="control-btn tts-btn" aria-label="Play text-to-speech">
                    ‚ñ∂ Play
                </button>
                <button id="ttsStop" class="control-btn tts-stop" aria-label="Stop text-to-speech">
                    ‚èπ Stop
                </button>
                <button id="nextBtn" class="control-btn" aria-label="Next page">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Desktop Controls (centered) -->
        <div class="desktop-controls">
            <div class="control-group">
                <button id="prevBtnDesktop" class="control-btn large" aria-label="Previous page">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 18l-6-6 6-6"/>
                    </svg>
                </button>
                <div class="page-controls">
                    <input type="range" id="pageRange" class="page-range" min="1" max="1" value="1" aria-label="Page navigation">
                    <span id="pageCounterDesktop">1 / 1</span>
                </div>
                <button id="nextBtnDesktop" class="control-btn large" aria-label="Next page">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </button>
            </div>
            <div class="tts-controls">
                <button id="ttsBtnDesktop" class="control-btn tts-btn large" aria-label="Play text-to-speech">
                    ‚ñ∂ Play
                </button>
                <button id="ttsStopDesktop" class="control-btn tts-stop large" aria-label="Stop text-to-speech">
                    ‚èπ Stop
                </button>
            </div>
        </div>

        <!-- Loading overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
            <p>Loading book...</p>
        </div>
    </section>

    <!-- Toast notifications -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <!-- Scripts - Load in correct order -->
    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
